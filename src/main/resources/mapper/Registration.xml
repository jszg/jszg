<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC
        "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!--namespace 非常重要：必须是 Mapper 类的全路径-->
<mapper namespace="com.xtuer.mapper.RegistrationMapper">
    <select id="deleteByRegisterId" resultType="RegistrationForm">
        DELETE
        FROM
            t_registration r
        WHERE
            hv.reg_id = #{registerId}
    </select>
    <insert id="insertRegistration" parameterType="RegistrationForm">
        <selectKey resultType="long" order="BEFORE" keyProperty="regId">
            SELECT S_REG_ID.Nextval from DUAL
        </selectKey>

        INSERT INTO t_registration (
            id_no,        cert_no,       cert_assign,        cb_id,
            org_id,       subject,       name,               sex,
            nation,       address,       birth_place,         cellphone,
            degree,       edu_level,     email,               password,
            graduate_school,  temp_school,  gradua_time,  learn_type,
            major,        normal_major,  phone,      political,
            pth_level,      residence,     technique_job,  work_units,
            zip_cole,     exam,          status,         data_from,
            delete_status,org_id,        org_name,       province_id
            occupation,   ip,            city_id,      Enroll_Pro_Batch_Id,
            reg_id
        )
        VALUES (
            #{idNo},     #{certNo},       #{certAssign}, #{certBatchId},
            #{orgId},    #{subjectId},    #{name},       #{sex},
            #{nation},   #{address},      #{birthPlace}, #{cellPhone},
            #{degreeId}, #{eduLevelId},   #{email},      #{password},
            #{graduateSchool},  #{graduateSchoolName},   #{graduaTime},        #{learnType},
            #{majorId},  #{ormanMajor},   #{phone},      #{political},
            #{pthevelId},#{residence},    #{techniqueJobId},#{workUnits},
            #{zipCode},  #{exam},         #{status},     #{dataFrom},
            #{deleteStatus},  #{orgId},   #{orgName},     #{provinceId},
            #{occupation},    #{ip},      #{cityId},      #{enrollProBatchId},
            #{regId}
        )
    </insert>

    <update id="updateByEnrollProBatchId" parameterType="RegistrationForm">
        UPDATE  t_registration
        SET  enroll_pro_batch_id = #{}
        where reg_id = #{regId}
    </update>

</mapper>
